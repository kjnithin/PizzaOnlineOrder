var app=angular.module("pizzaOrder",["ui.router","toastr","ngMaterial"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/Login"),a.state("login",{url:"/Login",templateUrl:"views/login.html"}).state("register",{url:"/Register",templateUrl:"views/register.html"}).state("register.step1",{url:"/",templateUrl:"views/registerViews/step1.html"}).state("register.step2",{url:"/",templateUrl:"views/registerViews/step2.html"}).state("register.step3",{url:"/",templateUrl:"views/registerViews/step3.html"}).state("register.step4",{url:"/",templateUrl:"views/registerViews/step4.html"}).state("admin",{url:"/Admin",abstract:!0,templateUrl:"views/admin.html"}).state("admin.order",{url:"/Order",templateUrl:"views/adminViews/admin_order.html"}).state("admin.inventory",{url:"/Inventory",templateUrl:"views/adminViews/admin_inventory.html"}).state("admin.user",{url:"/UserDetails",templateUrl:"views/adminViews/admin_userDetails.html"}).state("admin.personal",{url:"/AdminDetails",views:{"":{templateUrl:"views/adminViews/admin_personalDetails.html"},"right@admin.personal":{templateUrl:"views/adminViews/adminPersonalDetails/right.html"},"left@admin.personal":{templateUrl:"views/adminViews/adminPersonalDetails/left.html"}}}).state("user",{url:"/User",abstract:!0,templateUrl:"views/user.html"}).state("user.order",{url:"/Order",templateUrl:"views/userViews/user_order.html"}).state("user.history",{url:"/History",templateUrl:"views/userViews/user_history.html"}).state("user.details",{url:"/Details",views:{"":{templateUrl:"views/userViews/user_details.html"},"left@user.details":{templateUrl:"views/userViews/UserDetails/userDetailsLeft.html"},"right@user.details":{templateUrl:"views/userViews/UserDetails/userDetailsRight.html"}}})}]),app.controller("adminController",["$scope","connectHttp",function(a,b){b.getAllUser().then(function(b){for(var c=[],d=[],e=0;e<b.data.length;e++)"user"===b.data[e].role?c.push(b.data[e]):"admin"===b.data[e].role&&d.push(b.data[e]);a.user=c,a.personal=d}),a.demo={showTooltip:!0,tipDirection:"bottom"},a.delete=function(a){b.deleteUser(a).then(function(a){})}}]),app.controller("displayController",["$scope","connectHttp",function(a,b){}]),app.controller("loginController",["$scope","toastr","connectHttp","$state","$rootScope",function(a,b,c,d,e){a.loginForm={},a.login=function(){c.loginHttp(a.loginForm).then(function(a){"admin"===a.data.user.role?d.go("admin.order"):"user"===a.data.user.role?d.go("user.order"):d.go(""),b.success("Successfully Logged In!!")},function(a){b.error("Invalid Credentials")})},a.go=function(){d.go("register.step1")},a.auth={},a.signWithGoogle=function(){var e={clientid:"75087466487-6ij85f507k5f4ucru1tfg1mugjs6bkhh.apps.googleusercontent.com",cookiepolicy:"single_host_origin",callback:function(e){if(e.status.signed_in){gapi.client.plus.people.get({userId:"me"}).execute(function(e){a.email=e.emails[0].value,a.auth={email:a.email},c.googleAuth(a.auth).then(function(a){"admin"===a.data.role?d.go("admin.order"):"user"===a.data.role?d.go("user.order"):d.go(""),b.success("Successfully Logged In!!")},function(a){b.error("Invalid Credentials")})})}},approvalprompt:"force",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read"};gapi.auth.signIn(e)}}]),app.controller("logoutController",["$scope","$location","toastr","connectHttp",function(a,b,c,d){a.logout=function(){d.logoutHttp().then(function(a){b.path("/Login"),c.success("Successfully Logged Out!!")},function(a){c.error("Please Try Again")})}}]),app.controller("registerController",["$scope","$location","toastr","connectHttp","$state",function(a,b,c,d,e){a.registerForm={},a.register=function(){d.registerHttp(a.registerForm).then(function(a){b.path("/Login"),c.success("Successfully Registered!!")},function(a){c.error("Invalid Credentials")})},d.provinceHttp().then(function(b){a.provinceName=b.data},function(a){c.error("Invalid Credentials"+a.data.error)}),a.backToLogin=function(){e.go("login")}}]),app.controller("userController",function(a){}),app.service("connectHttp",["$http",function(a){var b="http://localhost:3000";this.logoutHttp=function(){return a.get(b+"/logout")},this.provinceHttp=function(){return a.get(b+"/provinces")},this.loginHttp=function(c){return a.post(b+"/login",c)},this.registerHttp=function(c){return a.post(b+"/users",c)},this.getAllUser=function(){return a.get(b+"/users")},this.deleteUser=function(c){return a.delete(b+"/users/"+c)},this.googleAuth=function(c){return a.post(b+"/auth",c)}}]);